{"version":3,"file":"keyedPool.js","names":["Duration","require","Equal","Function_js_1","Hash","HashMap","MutableRef","Option","Pipeable_js_1","Predicate","core","fiberRuntime","pool","KeyedPoolSymbolKey","exports","KeyedPoolTypeId","Symbol","for","KeyedPoolMapValueSymbol","keyedPoolVariance","_K","_","_E","_A","KeyedPoolImpl","getOrCreatePool","activePools","constructor","get","key","flatMap","invalidate","item","forEachSequentialDiscard","pipe","pipeArguments","arguments","Complete","_tag","symbol","string","combine","hash","u","isComplete","equals","isTagged","Pending","deferred","isPending","makeImpl","min","max","timeToLive","all","context","fiberId","sync","make","empty","scopeMake","map","scope","suspend","value","getOrUndefined","undefined","uninterruptibleMask","restore","deferredUnsafeMake","previous","has","update","set","scopeExtend","makeWithTTL","acquire","provideContext","getOrElse","infinity","matchCauseEffect","onFailure","cause","current","remove","zipRight","deferredFailCause","failCause","onSuccess","as","deferredSucceed","succeed","deferredAwait","forEachSequential","Array","from","values","options","size","none","makeWith","decode","some","makeWithTTLBy","dual","self"],"sources":["../../../src/internal/keyedPool.ts"],"sourcesContent":[null],"mappings":"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"}