{"version":3,"file":"tRef.js","names":["Function_js_1","require","Option","core","Entry","Versioned","TRefSymbolKey","exports","TRefTypeId","Symbol","for","tRefVariance","_A","_","TRefImpl","todos","versioned","constructor","value","Map","modify","f","effect","journal","entry","getOrMakeEntry","retValue","newValue","unsafeGet","unsafeSet","make","ref","set","get","self","a","dual","getAndSet","getAndUpdate","getAndUpdateSome","match","onNone","onSome","b","setAndGet","modifySome","fallback","update","updateAndGet","updateSome","updateSomeAndGet","has","undefined"],"sources":["../../../../src/internal/stm/tRef.ts"],"sourcesContent":[null],"mappings":"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"}