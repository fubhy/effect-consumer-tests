{"version":3,"file":"journal.js","names":["Entry","require","exports","JournalAnalysisInvalid","JournalAnalysisReadWrite","JournalAnalysisReadOnly","commitJournal","journal","entry","commit","analyzeJournal","val","isInvalid","isChanged","prepareResetJournal","saved","Map","set","copy","clear","collectTodos","allTodos","todo","ref","todos","execTodos","todosSorted","Array","from","entries","sort","x","y","_","addTodo","txnId","todoEffect","added","has","isValid","valid"],"sources":["../../../../../src/internal/stm/stm/journal.ts"],"sourcesContent":[null],"mappings":"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"}