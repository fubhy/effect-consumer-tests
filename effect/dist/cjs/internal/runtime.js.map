{"version":3,"file":"runtime.js","names":["Context","require","Exit","Fiber","FiberId","FiberRefs","Function_js_1","Inspectable_js_1","Option","Pipeable_js_1","Predicate","_scheduler","cause_js_1","InternalCause","core","FiberRuntime","fiberScope","OpCodes","runtimeFlags","_supervisor","unsafeFork","runtime","self","options","fiberId","unsafeMake","effect","fiberRefs","updatedAs","fiberRef","currentContext","value","context","scheduler","currentScheduler","updateRefs","fiberRuntime","forkAs","supervisor","none","onStart","addObserver","exit","onEnd","globalScope","add","start","exports","unsafeRunCallback","onExit","id","onExitInterrupt","pipe","interruptAs","flatten","unsafeRunSync","result","unsafeRunSyncExit","_tag","fiberFailure","i0","asyncFiberException","fiber","limit","Error","stackTraceLimit","error","message","Object","defineProperties","name","toString","get","NodeInspectSymbol","isAsyncFiberException","u","isTagged","FiberFailureId","Symbol","for","FiberFailureCauseId","cause","prettyErrors","length","head","split","substring","stack","pretty","toJSON","_id","isFiberFailure","hasProperty","fastPath","op","_op","exitFail","left","exitSucceed","right","NoSuchElementException","SyncScheduler","flush","unsafePoll","unsafeRunPromise","unsafeRunPromiseExit","then","OP_SUCCESS","OP_FAILURE","Promise","resolve","RuntimeImpl","constructor","pipeArguments","arguments","make","withFiberRuntime","state","status","succeed","getFiberRef","getFiberRefs","defaultRuntimeFlags","Interruption","CooperativeYielding","RuntimeMetrics","defaultRuntime","empty","unsafeRunEffect","unsafeForkEffect","unsafeRunPromiseEffect","unsafeRunPromiseExitEffect","unsafeRunSyncEffect","unsafeRunSyncExitEffect","asyncEffect","register","flatMap","deferredMake","deferred","uninterruptibleMask","restore","zipRight","fork","catchAllCause","cb","intoDeferred","deferredFailCause","deferredAwait"],"sources":["../../../src/internal/runtime.ts"],"sourcesContent":[null],"mappings":"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"}