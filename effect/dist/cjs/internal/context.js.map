{"version":3,"file":"context.js","names":["Equal","require","Function_js_1","GlobalValue_js_1","Hash","Inspectable_js_1","Pipeable_js_1","Predicate_js_1","effectable_js_1","option","exports","TagTypeId","Symbol","for","STMSymbolKey","STMTypeId","TagProto","EffectPrototype","_tag","_op","effectVariance","_S","_","_I","toString","toJSON","_id","identifier","stack","NodeInspectSymbol","of","self","context","make","tagRegistry","globalValue","Map","makeTag","has","get","limit","Error","stackTraceLimit","creationError","tag","Object","create","defineProperty","set","TypeId","ContextProto","symbol","that","isContext","unsafeMap","size","k","keys","equals","number","pipe","pipeArguments","arguments","services","Array","from","map","makeContext","serviceNotFoundError","error","String","lines","split","length","afterAt","match","message","splice","join","u","hasProperty","isTag","_empty","empty","service","add","dual","unsafeGet","getOption","none","some","merge","s","pick","tags","tagSet","Set","newEnv","entries","omit","delete"],"sources":["../../../src/internal/context.ts"],"sourcesContent":[null],"mappings":"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"}