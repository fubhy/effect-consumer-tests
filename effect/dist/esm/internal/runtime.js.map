{"version":3,"file":"runtime.js","names":["Context","Exit","Fiber","FiberId","FiberRefs","pipe","NodeInspectSymbol","toString","Option","pipeArguments","Predicate","_scheduler","NoSuchElementException","InternalCause","core","FiberRuntime","fiberScope","OpCodes","runtimeFlags","_supervisor","unsafeFork","runtime","self","options","fiberId","unsafeMake","effect","fiberRefs","updatedAs","fiberRef","currentContext","value","context","scheduler","currentScheduler","updateRefs","fiberRuntime","forkAs","supervisor","none","onStart","addObserver","exit","onEnd","globalScope","add","start","unsafeRunCallback","onExit","id","onExitInterrupt","interruptAs","flatten","unsafeRunSync","result","unsafeRunSyncExit","_tag","fiberFailure","i0","asyncFiberException","fiber","limit","Error","stackTraceLimit","error","message","Object","defineProperties","name","get","isAsyncFiberException","u","isTagged","FiberFailureId","Symbol","for","FiberFailureCauseId","cause","prettyErrors","length","head","split","substring","stack","pretty","toJSON","_id","isFiberFailure","hasProperty","fastPath","op","_op","exitFail","left","exitSucceed","right","SyncScheduler","flush","unsafePoll","unsafeRunPromise","unsafeRunPromiseExit","then","OP_SUCCESS","OP_FAILURE","Promise","resolve","RuntimeImpl","constructor","arguments","make","withFiberRuntime","state","status","succeed","getFiberRef","getFiberRefs","defaultRuntimeFlags","Interruption","CooperativeYielding","RuntimeMetrics","defaultRuntime","empty","unsafeRunEffect","unsafeForkEffect","unsafeRunPromiseEffect","unsafeRunPromiseExitEffect","unsafeRunSyncEffect","unsafeRunSyncExitEffect","asyncEffect","register","flatMap","deferredMake","deferred","uninterruptibleMask","restore","zipRight","fork","catchAllCause","cb","intoDeferred","deferredFailCause","deferredAwait"],"sources":["../../../src/internal/runtime.ts"],"sourcesContent":[null],"mappings":"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"}